#!/usr/bin/env node
'use strict'

const sass = require('node-sass')
const globImporter = require('sass-glob-importer')
const bourbon = require('node-bourbon')
const CleanCSS = require('clean-css')

const file = process.argv[2]

if (!file) {
  console.error('Please specify a file to use as an entry point')
  process.exit(1)
}

sass.render({
  file: file,
  importer: globImporter(),
  includePaths: bourbon.with('node_modules/foundation-sites/scss/', 'node_modules/slick-carousel/slick/')
}, handleRender)

function handleRender (err, result) {
  if (err) {
    console.error(err)
    process.exit(1)
  }
  const source = result.css.toString('utf8')
  const minified = new CleanCSS().minify(source).styles
  console.log(minified)
  process.exit(0)
}